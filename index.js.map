{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["'use strict'\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nconst gallery = document.querySelector('.gallery');\n\nexport function fetchGallery(data) {\n  gallery.insertAdjacentHTML('beforeend', markupGallery(data));\n\n  lightbox.refresh();\n}\nfunction markupGallery(data) {\n  return data.hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        }) =>\n            `<li class=\"gallery-item hvr-grow\">\n\t\t\t\t\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t\t\t\t\t<figure class=\"gallery-figure \">\n\t\t\t\t\t\t\t<img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n\t\t\t\t\t\t\t<figcaption class=\"gallery-figcaption\">\n\t\t\t\t\t\t\t\t<ul class=\"img-content-wrapper\">\n\t\t\t\t\t\t\t\t\t<li>Likes<span>${likes}</span></li>\n\t\t\t\t\t\t\t\t\t<li>Views<span>${views}</span></li>\n\t\t\t\t\t\t\t\t\t<li>Comments<span>${comments}</span></li>\n\t\t\t\t\t\t\t\t\t<li>Downloads<span>${downloads}</span></li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</figcaption>\n\t\t\t\t\t\t</figure>\n\t\t\t\t\t</a>\n\t\t\t\t</li>`\n    )\n    .join('');\n}\n\nexport function fetchLoader() {\n  gallery.insertAdjacentHTML(\n    'beforeend',\n    `<div class='loader-wrapper'>\n        <div class='loader'></div>\n    </div>`\n  );\n}","import axios from 'axios';\nimport { MESSAGES, MESSAGES_BG_COLORS, showInfoMessage } from '../main';\nimport { fetchLoader } from './render-functions';\n\nconst API_KEY = '47437632-13d8a5fe3440cf41b4c602234';\nconst API_URL = 'https://pixabay.com/api/?';\nconst CONFIG = {\n  params: {\n    key: API_KEY,\n    image_type: 'photo',\n    orientations: 'horizontal',\n    safesearch: true,\n    page: 1,\n    per_page: 15,\n  },\n};\n\nexport async function getGalleryData(queryValue, page) {\n  try {\n    fetchLoader();\n    CONFIG.params.q = queryValue;\n    CONFIG.params.page = page;\n    const response = await axios.get(API_URL, CONFIG);\n    return response.data;\n  } catch (error) {\n    if (error.response) {\n      const { data } = error.response;\n      showInfoMessage(\n        `${MESSAGES.exception} ERROR: ${data}`,\n        MESSAGES_BG_COLORS.orange\n      );\n    } else if (error.request) {\n\n      showInfoMessage(\n        `${MESSAGES.exception} ERROR: ${error.request}`,\n        MESSAGES_BG_COLORS.orange\n      );\n    } else {\n      showInfoMessage(\n        `${MESSAGES.exception} ERROR: ${error.message}`,\n        MESSAGES_BG_COLORS.orange\n      );\n    }\n  }\n}","'use strict'\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getGalleryData } from './js/pixabay-api';\nimport { fetchGallery } from './js/render-functions';\n\nlet queryString = '';\nlet currentPage = 1;\nlet evtType = '';\n\nconst IMAGE_MAX_COUNT = 15;\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nform.addEventListener('submit', onSubmitForm);\n\nloadMoreBtn.addEventListener('click', async () => {\n  try {\n    evtType = EVENT_TYPE.click;\n    await renderGallery(queryString, currentPage);\n    const liEl = document.querySelector('li');\n    const { height } = liEl.getBoundingClientRect();\n    scrollVertical(height * 2, 0);\n  } catch (error) {\n    showInfoMessage(MESSAGES.exception + error, MESSAGES_BG_COLORS.orange);\n  }\n});\n\nasync function onSubmitForm(event) {\n  try {\n    event.preventDefault();\n\n    const target = event.target;\n    const search = target.elements.search.value.trim();\n\n    evtType = EVENT_TYPE.submit;\n\n    loadMoreBtn.classList.remove('visible');\n\n    iziToast.destroy();\n\n    if (queryString !== search || evtType === EVENT_TYPE.submit) {\n      gallery.innerHTML = '';\n      queryString = target.elements.search.value.trim();\n      currentPage = 1;\n    }\n\n    if (!search) {\n      showInfoMessage(MESSAGES.info, MESSAGES_BG_COLORS.blue);\n      gallery.innerHTML = '';\n      return;\n    }\n\n    await renderGallery(queryString, currentPage);\n\n    target.reset();\n  } catch (error) {\n    showInfoMessage(MESSAGES.exception + error, MESSAGES_BG_COLORS.orange);\n  }\n}\n\nasync function renderGallery(searchValue, page) {\n  try {\n    if (searchValue === queryString && evtType === EVENT_TYPE.click) {\n      currentPage += 1;\n      page += 1;\n    }\n\n    const galleryData = await getGalleryData(searchValue, page);\n\n    removeLoader();\n\n    if (validateGalleryData(galleryData)) {\n      const restOfImages = Math.round(galleryData.totalHits / page);\n      fetchGallery(galleryData);\n      showHideBtn(restOfImages);\n    }\n  } catch (error) {\n    showInfoMessage(MESSAGES.exception + error, MESSAGES_BG_COLORS.orange);\n  }\n}\n\nfunction scrollVertical(x = 0, y = 0) {\n  window.scrollBy({ top: x, left: y, behavior: 'smooth' });\n}\n\nfunction removeLoader() {\n  const loaderWrapper = document.querySelector('.loader-wrapper');\n  loaderWrapper.remove();\n}\n\nfunction validateGalleryData(galleryData) {\n  if (!galleryData) {\n    gallery.innerHTML = '';\n    return false;\n  } else if (galleryData && galleryData.totalHits === 0) {\n    showInfoMessage(MESSAGES.warning, MESSAGES_BG_COLORS.red);\n    gallery.innerHTML = '';\n    return false;\n  } else {\n    return true;\n  }\n}\n\nfunction showHideBtn(imagesCount) {\n  if (imagesCount <= IMAGE_MAX_COUNT) {\n    loadMoreBtn.classList.remove('visible');\n    showInfoMessage(MESSAGES.endOfSearch, MESSAGES_BG_COLORS.blue);\n    return;\n  }\n  loadMoreBtn.classList.add('visible');\n}\n//HELPERS__MASSAGE\n\n\nconst MESSAGES = {\n  info: `Please enter a value in the search field!`,\n  endOfSearch: `We're sorry, but you've reached the end of search results.`,\n  warning: `Sorry, there are no images matching your search query. Please try again!`,\n  error: `Sorry, there are no connection to the server. Please try again later!`,\n  exception: `Exception: We have some issue with connection. Please try again later!`,\n};\n\nconst MESSAGES_BG_COLORS = {\n  blue: '#abd4f8',\n  orange: '#f28111',\n  red: '#e97782',\n};\n\nconst EVENT_TYPE = {\n  click: 'click',\n  submit: 'submit',\n};\n\nfunction showInfoMessage(message, color) {\n  iziToast.info({\n    position: 'topRight',\n    backgroundColor: `${color}`,\n    message: `${message}`,\n  });\n}\n\nexport { EVENT_TYPE, MESSAGES, MESSAGES_BG_COLORS, showInfoMessage };"],"names":["lightbox","SimpleLightbox","gallery","fetchGallery","data","markupGallery","webformatURL","largeImageURL","tags","likes","views","comments","downloads","fetchLoader","API_KEY","API_URL","CONFIG","getGalleryData","queryValue","page","axios","error","showInfoMessage","MESSAGES","MESSAGES_BG_COLORS","queryString","currentPage","evtType","IMAGE_MAX_COUNT","form","loadMoreBtn","onSubmitForm","EVENT_TYPE","renderGallery","liEl","height","scrollVertical","event","target","search","iziToast","searchValue","galleryData","removeLoader","validateGalleryData","restOfImages","showHideBtn","x","y","imagesCount","message","color"],"mappings":"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"}